class t{constructor(t,e,n,s,a,i,r=null,o=null,d={}){this.id=t,this.parentId=e,this.name=n,this.localizedNames=d,this.progress=s>100?100:s<0?0:s,this.datePlannedStart=a,this.datePlannedEnd=i,this.dateActualStart=r,this.dateActualEnd=o}}class e{constructor(t,e,n,s,a,i,r,o=null,d=null,l=0,u=!1,h=null,c=null){this._progress=0,this.externalId=t,this.parentExternalId=e,this.name=n,this.localizedNames=s,this.progress=a,this.datePlannedStart=i,this.datePlannedEnd=r,this.dateActualStart=o,this.dateActualEnd=d,this.nestingLvl=l,this.hasChildren=u,this.parentUuid=h,this.uuid=c||crypto.getRandomValues(new Uint32Array(4)).join("-"),this.shown=!h,this.expanded=!1,this.selected=!1}set progress(t){this._progress=t<0?0:t>100?100:t}get progress(){return this._progress}static convertModelsToTasks(t,n=new Map){const s=t.slice(),a=new Set(s.map(t=>t.parentId)),i=[];let r=[];for(let t=s.length-1;t>=0;t--){const o=s[t];if(null===o.parentId){const d=new e(o.id,o.parentId,o.name,o.localizedNames,o.progress,o.datePlannedStart,o.datePlannedEnd,o.dateActualStart,o.dateActualEnd,0,a.has(o.id),null,n.get(o.id));i.push(d),r.push(d),s.splice(t,1)}}let o=1;for(;0!==s.length||0!==r.length;){const t=[];r.filter(t=>t.hasChildren).forEach(r=>{for(let d=s.length-1;d>=0;d--){const l=s[d];if(l.parentId===r.externalId){const u=new e(l.id,l.parentId,l.name,l.localizedNames,l.progress,l.datePlannedStart,l.datePlannedEnd,l.dateActualStart,l.dateActualEnd,o,a.has(l.id),r.uuid,n.get(l.id));i.push(u),t.push(u),s.splice(d,1)}}}),r=t,o++}return i}static convertTasksToModels(e){return e.map(e=>new t(e.externalId,e.parentExternalId,e.name,e.progress,e.datePlannedStart,e.datePlannedEnd,e.dateActualStart,e.dateActualEnd,e.localizedNames))}static detectTaskChanges(t){const{oldTasks:e,newTasks:n}=t,s=e.map(t=>t.uuid),a=n.map(t=>t.uuid),i=e.filter(t=>!a.includes(t.uuid)),r=[],o=[];for(const t of n){if(!s.includes(t.uuid)){r.push(t);continue}const n=e.find(e=>e.uuid===t.uuid);t.equals(n)||o.push(t)}return{deleted:i,added:r,changed:o}}static getTasksIdsMap(t){const e=new Map;for(const n of t)e.has(n.externalId)||e.set(n.externalId,n.uuid);return e}static checkPaternity(t,e,n){var s;let a=n.parentUuid;for(;a;){if(a===e.uuid)return!0;a=null===(s=t.find(t=>t.uuid===a))||void 0===s?void 0:s.parentUuid}return!1}equals(t){var e,n,s,a,i,r,o,d;return this.uuid===t.uuid&&this.parentUuid===t.parentUuid&&this.nestingLvl===t.nestingLvl&&this.hasChildren===t.hasChildren&&this.name===t.name&&this.progress===t.progress&&(null===(e=this.datePlannedStart)||void 0===e?void 0:e.getTime())===(null===(n=t.datePlannedStart)||void 0===n?void 0:n.getTime())&&(null===(s=this.datePlannedEnd)||void 0===s?void 0:s.getTime())===(null===(a=t.datePlannedEnd)||void 0===a?void 0:a.getTime())&&(null===(i=this.dateActualStart)||void 0===i?void 0:i.getTime())===(null===(r=t.dateActualStart)||void 0===r?void 0:r.getTime())&&(null===(o=this.dateActualEnd)||void 0===o?void 0:o.getTime())===(null===(d=t.dateActualEnd)||void 0===d?void 0:d.getTime())&&this.expanded===t.expanded&&this.shown===t.shown&&this.selected===t.selected}compareTo(t){var e,n,s,a,i,r,o,d,l,u,h,c,p,m,f,g;return this.nestingLvl>t.nestingLvl?1:this.nestingLvl<t.nestingLvl?-1:(null===(e=this.datePlannedStart)||void 0===e?void 0:e.getTime())>(null===(n=t.datePlannedStart)||void 0===n?void 0:n.getTime())?1:(null===(s=this.datePlannedStart)||void 0===s?void 0:s.getTime())<(null===(a=t.datePlannedStart)||void 0===a?void 0:a.getTime())?-1:(null===(i=this.datePlannedEnd)||void 0===i?void 0:i.getTime())>(null===(r=t.datePlannedEnd)||void 0===r?void 0:r.getTime())?1:(null===(o=this.datePlannedEnd)||void 0===o?void 0:o.getTime())<(null===(d=t.datePlannedEnd)||void 0===d?void 0:d.getTime())?-1:(null===(l=this.dateActualStart)||void 0===l?void 0:l.getTime())>(null===(u=t.dateActualStart)||void 0===u?void 0:u.getTime())?1:(null===(h=this.dateActualStart)||void 0===h?void 0:h.getTime())<(null===(c=t.dateActualStart)||void 0===c?void 0:c.getTime())?-1:(null===(p=this.dateActualEnd)||void 0===p?void 0:p.getTime())>(null===(m=t.dateActualEnd)||void 0===m?void 0:m.getTime())?1:(null===(f=this.dateActualEnd)||void 0===f?void 0:f.getTime())<(null===(g=t.dateActualEnd)||void 0===g?void 0:g.getTime())?-1:0}}class n{}class s{}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var a=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",s="hour",a="day",i="week",r="month",o="quarter",d="year",l=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,u=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(t,e,n){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(n)+t},c={s:h,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),s=Math.floor(n/60),a=n%60;return(e<=0?"+":"-")+h(s,2,"0")+":"+h(a,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(n,r),a=e-s<0,i=t.clone().add(n+(a?-1:1),r);return Number(-(n+(e-s)/(a?s-i:i-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:r,y:d,w:i,d:a,D:"date",h:s,m:n,s:e,ms:t,Q:o}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m="en",f={};f[m]=p;var g=function(t){return t instanceof E},v=function(t,e,n){var s;if(!t)return m;if("string"==typeof t)f[t]&&(s=t),e&&(f[t]=e,s=t);else{var a=t.name;f[a]=t,s=a}return!n&&s&&(m=s),s||!n&&m},S=function(t,e,n){if(g(t))return t.clone();var s=e?"string"==typeof e?{format:e,pl:n}:e:{};return s.date=t,new E(s)},_=c;_.l=v,_.i=g,_.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var E=function(){function h(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var c=h.prototype;return c.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(_.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(l);if(s)return n?new Date(Date.UTC(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)):new Date(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)}return new Date(e)}(t),this.init()},c.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},c.$utils=function(){return _},c.isValid=function(){return!("Invalid Date"===this.$d.toString())},c.isSame=function(t,e){var n=S(t);return this.startOf(e)<=n&&n<=this.endOf(e)},c.isAfter=function(t,e){return S(t)<this.startOf(e)},c.isBefore=function(t,e){return this.endOf(e)<S(t)},c.$g=function(t,e,n){return _.u(t)?this[e]:this.set(n,t)},c.year=function(t){return this.$g(t,"$y",d)},c.month=function(t){return this.$g(t,"$M",r)},c.day=function(t){return this.$g(t,"$W",a)},c.date=function(t){return this.$g(t,"$D","date")},c.hour=function(t){return this.$g(t,"$H",s)},c.minute=function(t){return this.$g(t,"$m",n)},c.second=function(t){return this.$g(t,"$s",e)},c.millisecond=function(e){return this.$g(e,"$ms",t)},c.unix=function(){return Math.floor(this.valueOf()/1e3)},c.valueOf=function(){return this.$d.getTime()},c.startOf=function(t,o){var l=this,u=!!_.u(o)||o,h=_.p(t),c=function(t,e){var n=_.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return u?n:n.endOf(a)},p=function(t,e){return _.w(l.toDate()[t].apply(l.toDate(),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},m=this.$W,f=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case d:return u?c(1,0):c(31,11);case r:return u?c(1,f):c(0,f+1);case i:var S=this.$locale().weekStart||0,E=(m<S?m+7:m)-S;return c(u?g-E:g+(6-E),f);case a:case"date":return p(v+"Hours",0);case s:return p(v+"Minutes",1);case n:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},c.endOf=function(t){return this.startOf(t,!1)},c.$set=function(i,o){var l,u=_.p(i),h="set"+(this.$u?"UTC":""),c=(l={},l.day=h+"Date",l.date=h+"Date",l[r]=h+"Month",l[d]=h+"FullYear",l[s]=h+"Hours",l[n]=h+"Minutes",l[e]=h+"Seconds",l[t]=h+"Milliseconds",l)[u],p=u===a?this.$D+(o-this.$W):o;if(u===r||u===d){var m=this.clone().set("date",1);m.$d[c](p),m.init(),this.$d=m.set("date",Math.min(this.$D,m.daysInMonth())).toDate()}else c&&this.$d[c](p);return this.init(),this},c.set=function(t,e){return this.clone().$set(t,e)},c.get=function(t){return this[_.p(t)]()},c.add=function(t,o){var l,u=this;t=Number(t);var h=_.p(o),c=function(e){var n=S(u);return _.w(n.date(n.date()+Math.round(e*t)),u)};if(h===r)return this.set(r,this.$M+t);if(h===d)return this.set(d,this.$y+t);if(h===a)return c(1);if(h===i)return c(7);var p=(l={},l[n]=6e4,l[s]=36e5,l[e]=1e3,l)[h]||1,m=this.$d.getTime()+t*p;return _.w(m,this)},c.subtract=function(t,e){return this.add(-1*t,e)},c.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",s=_.z(this),a=this.$locale(),i=this.$H,r=this.$m,o=this.$M,d=a.weekdays,l=a.months,h=function(t,s,a,i){return t&&(t[s]||t(e,n))||a[s].substr(0,i)},c=function(t){return _.s(i%12||12,t,"0")},p=a.meridiem||function(t,e,n){var s=t<12?"AM":"PM";return n?s.toLowerCase():s},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:_.s(o+1,2,"0"),MMM:h(a.monthsShort,o,l,3),MMMM:l[o]||l(this,n),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:h(a.weekdaysMin,this.$W,d,2),ddd:h(a.weekdaysShort,this.$W,d,3),dddd:d[this.$W],H:String(i),HH:_.s(i,2,"0"),h:c(1),hh:c(2),a:p(i,r,!0),A:p(i,r,!1),m:String(r),mm:_.s(r,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:s};return n.replace(u,(function(t,e){return e||m[t]||s.replace(":","")}))},c.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},c.diff=function(t,a,l){var u,h=_.p(a),c=S(t),p=6e4*(c.utcOffset()-this.utcOffset()),m=this-c,f=_.m(this,c);return f=(u={},u[d]=f/12,u[r]=f,u[o]=f/3,u[i]=(m-p)/6048e5,u.day=(m-p)/864e5,u[s]=m/36e5,u[n]=m/6e4,u[e]=m/1e3,u)[h]||m,l?f:_.a(f)},c.daysInMonth=function(){return this.endOf(r).$D},c.$locale=function(){return f[this.$L]},c.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),s=v(t,e,!0);return s&&(n.$L=s),n},c.clone=function(){return _.w(this.$d,this)},c.toDate=function(){return new Date(this.valueOf())},c.toJSON=function(){return this.isValid()?this.toISOString():null},c.toISOString=function(){return this.$d.toISOString()},c.toString=function(){return this.$d.toUTCString()},h}();return S.prototype=E.prototype,S.extend=function(t,e){return t(e,E,S),S},S.locale=v,S.isDayjs=g,S.unix=function(t){return S(1e3*t)},S.en=f[m],S.Ls=f,S}()}));class i{constructor(t=null){this.enableChartEdit=!0,this.tableMinWidth=100,this.rowNestingMaxCount=5,this.rowNestingIndentPx=20,this.columnsMinWidthPx=[200,100,100,100,100,100,100,100],this.columnsContentAlign=["start","end","center","center","center","center","center","center"],this.defaultScale="day",this.locale="en",this.localeDecimalSeparator={en:".",uk:",",ru:","},this.localeDateFormat={en:"MM/DD/YYYY",uk:"DD.MM.YYYY",ru:"DD.MM.YYYY"},this.localeFirstWeekDay={en:0,uk:1,ru:1},this.localeDateMonths={en:["January","February","March","April","May","June","July","August","September","October","November","December"],uk:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},this.localeDateDays={en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],uk:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],ru:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},this.localeDateScale={en:["Hours","Days","Weeks","Months"],uk:["Години","Дні","Тижні","Місяці"],ru:["Часы","Дни","Недели","Месяцы"]},this.localeFooters={en:["Total tasks","Completed"],uk:["Всього задач","Завершено"],ru:["Всего задач","Завершено"]},this.localeHeaders={en:["Name","Progress","Start date planned","End date planned","Start date actual","End date actual","Duration planned","Duration actual"],uk:["Ім'я","Прогрес","Дата початку планована","Дата завершення планована","Дата початку фактична","Дата завершення фактична","Тривалість планована","Тривалість фактична"],ru:["Имя","Прогресс","Дата начала планируемая","Дата окончания планируемая","Дата начала фактическая","Дата окончания фактическая","Длительность планируемая","Длительность фактическая"]},this.localeDurationFormatters={en:t=>1===t?"1 day":t+" days",uk:t=>{let e=t%100;return e>10&&e<20?e+" днів":(e%=10,1===e?e+" день":e<5?e+" дні":e+" днів")},ru:t=>{let e=t%100;return e>10&&e<20?e+" дней":(e%=10,1===e?e+" день":e<5?e+" дня":e+" дней")}},this.columnValueGetters=[(t=>t.localizedNames[this.locale]||t.name).bind(this),(t=>(+t.progress.toFixed(2)).toLocaleString("en-US").replace(".",this.localeDecimalSeparator[this.locale]||".")).bind(this),(t=>a(t.datePlannedStart).format(this.localeDateFormat[this.locale]||"L")).bind(this),(t=>a(t.datePlannedEnd).format(this.localeDateFormat[this.locale]||"L")).bind(this),(t=>t.dateActualStart?a(t.dateActualStart).format(this.localeDateFormat[this.locale]||"L"):"").bind(this),(t=>t.dateActualEnd?a(t.dateActualEnd).format(this.localeDateFormat[this.locale]||"L"):"").bind(this),(t=>{const e=a(t.datePlannedEnd),n=a(t.datePlannedStart),s=e.diff(n,"day")+1;return this.localeDurationFormatters[this.locale]?this.localeDurationFormatters[this.locale](s):s.toString()}).bind(this),(t=>{if(!t.dateActualEnd||!t.dateActualStart)return"";const e=a(t.dateActualEnd),n=a(t.dateActualStart),s=e.diff(n,"day")+1;return this.localeDurationFormatters[this.locale]?this.localeDurationFormatters[this.locale](s):s.toString()}).bind(this)],null!=t&&Object.assign(this,t)}}class r{constructor(t,e){this._options=e;const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.classList.add(...t),this._htmlSvg=n}get htmlSvg(){return this._htmlSvg}updateRows(t){}}class o{constructor(t,e,n,s){this.minWidth=t,this.contentAlign=e,this.header=n,this.valueGetter=s;const a=document.createElement("th");a.style.minWidth=this.minWidth+"px",a.innerHTML=this.header,this.html=this.generateHtml()}generateHtml(){const t=document.createElement("th");return t.style.minWidth=this.minWidth+"px",t.innerHTML=this.header,t}}class d{constructor(t,e){this.task=t,this.html=this.generateHtml(e)}generateHtml(t){const e=document.createElement("tr");return e.setAttribute("data-tsg-row-uuid",this.task.uuid),e.addEventListener("click",t=>{t.target.classList.contains(d.CELL_EXPANDER_CLASS)||e.dispatchEvent(new Event("tsgrowclick",{bubbles:!0}))}),this.task.selected&&e.classList.add("selected"),t.forEach((t,n)=>{const s=document.createElement("td"),a=document.createElement("div");if(a.classList.add(d.CELL_TEXT_WRAPPER_CLASS,t.contentAlign),0===n){for(let t=0;t<this.task.nestingLvl;t++)a.append(this.createEmptyIndent());if(this.task.hasChildren){const t=document.createElement("p");t.classList.add(d.CELL_EXPANDER_CLASS),t.setAttribute("data-tsg-row-uuid",this.task.uuid),t.innerHTML=this.task.expanded?"▴":"▾",t.addEventListener("click",e=>{t.dispatchEvent(new Event("tsgexpanderclick",{bubbles:!0}))}),a.append(t)}else a.append(this.createEmptyIndent())}const i=document.createElement("p");i.classList.add(d.CELL_TEXT_CLASS),i.innerHTML=t.valueGetter(this.task),a.append(i),s.append(a),e.append(s)}),e}createEmptyIndent(){const t=document.createElement("p");return t.classList.add(d.CELL_INDENT_CLASS),t}}d.CELL_TEXT_WRAPPER_CLASS="tsg-cell-text-wrapper",d.CELL_TEXT_CLASS="tsg-cell-text",d.CELL_INDENT_CLASS="tsg-cell-text-indent",d.CELL_EXPANDER_CLASS="tsg-cell-text-expander";class l{constructor(t,e){this._tableRows=[],this._options=e;const n=document.createElement("table");n.classList.add(...t);const s=n.createTHead(),a=n.createTBody();this._htmlTableHead=s,this._htmlTableBody=a,this._htmlTable=n,this.updateColumns()}get htmlTable(){return this._htmlTable}updateColumns(){const t=[];for(let e=0;e<9;e++){const n=this._options.columnsMinWidthPx[e],s="center"===this._options.columnsContentAlign[e]?"center":"end"===this._options.columnsContentAlign[e]?"end":"start";n&&t.push(new o(n,s,this._options.localeHeaders[this._options.locale][e]||"",this._options.columnValueGetters[e]||(t=>"")))}const e=document.createElement("tr");t.forEach(t=>e.append(t.html)),this._tableColumns=t,this._htmlTableHead.innerHTML="",this._htmlTableHead.append(e)}updateRows(t){t.deleted.forEach(t=>{const e=this._tableRows.findIndex(e=>e.task.uuid===t.uuid);1!==e&&this._tableRows.splice(e,1)}),t.changed.forEach(t=>{const e=this._tableRows.findIndex(e=>e.task.uuid===t.uuid);-1!==e&&(this._tableRows[e]=new d(t,this._tableColumns))}),t.added.forEach(t=>this._tableRows.push(new d(t,this._tableColumns))),this._htmlTableBody.innerHTML="",this._htmlTableBody.append(...this.getRowsHtmlRecursively(this._tableRows,null))}getRowsHtmlRecursively(t,e){const n=t.filter(t=>t.task.parentUuid===e).sort((t,e)=>t.task.compareTo(e.task)),s=[];for(const e of n)e.task.shown&&(s.push(e.html),e.task.expanded&&s.push(...this.getRowsHtmlRecursively(t,e.task.uuid)));return s}}class u{constructor(t,e){if(this._tasks=[],this._htmlSeparatorDragActive=!1,this.onMouseDownOnSep=t=>{t.target===this._htmlSeparator&&(this._htmlSeparatorDragActive=!0)},this.onMouseMoveOnSep=t=>{if(!this._htmlSeparatorDragActive)return!1;const e=this._htmlWrapper.offsetLeft,n=t.clientX-e;this.setTableWrapperWidth(n)},this.onMouseUpOnSep=t=>{this._htmlSeparatorDragActive=!1},this.onRowClick=t=>{const e=t.target.dataset.tsgRowUuid,n=this._tasks.find(t=>t.uuid===e);this.selectTask(n)},this.onRowExpanderClick=t=>{const e=t.target;this.toggleTaskExpanded(e.dataset.tsgRowUuid)},this._options=new i(e),this._htmlContainer=document.querySelector(t),!this._htmlContainer)throw new Error("Container is null");this.createLayout()}get tasks(){return e.convertTasksToModels(this._tasks)}set tasks(t){const n=this.updateTasks(t),s=e.detectTaskChanges(n);this.updateRows(s)}get selectedTask(){return this._selectedTask?e.convertTasksToModels([this._selectedTask])[0]:null}set selectedTask(t){const e=this._tasks.find(e=>e.externalId===t.id);this.selectTask(e)}set locale(t){this._options.locale=t,this.updateLocale()}destroy(){this.removeSepEventListeners(),this.removeRowEventListeners(),this._htmlWrapper.remove()}removeSepEventListeners(){document.removeEventListener("mousedown",this.onMouseDownOnSep),document.removeEventListener("mousemove",this.onMouseMoveOnSep),document.removeEventListener("mouseup",this.onMouseUpOnSep)}removeRowEventListeners(){document.removeEventListener("tsgrowclick",this.onRowClick),document.removeEventListener("tsgexpanderclick",this.onRowExpanderClick)}createLayout(){const t=document.createElement("div");t.classList.add(u.WRAPPER_CLASS);const e=document.createElement("div");e.classList.add(u.TABLE_WRAPPER_CLASS);const n=document.createElement("div");n.classList.add(u.CHART_WRAPPER_CLASS);const s=document.createElement("div");s.classList.add(u.SEPARATOR_CLASS),this._table=new l([u.TABLE_CLASS],this._options),this._chart=new r([u.CHART_CLASS],this._options),t.append(e),t.append(s),t.append(n),e.append(this._table.htmlTable),n.append(this._chart.htmlSvg),this._htmlContainer.append(t),this._htmlWrapper=t,this._htmlTableWrapper=e,this._htmlChartWrapper=n,this._htmlSeparator=s,document.addEventListener("mousedown",this.onMouseDownOnSep),document.addEventListener("mousemove",this.onMouseMoveOnSep),document.addEventListener("mouseup",this.onMouseUpOnSep),document.addEventListener("tsgrowclick",this.onRowClick),document.addEventListener("tsgexpanderclick",this.onRowExpanderClick)}updateTasks(t){const n=this._tasks,s=e.getTasksIdsMap(n),a=e.convertModelsToTasks(t,s);return this._tasks=a,{oldTasks:n,newTasks:a}}toggleTaskExpanded(t){let n;const s=[];for(const e of this._tasks)n||e.uuid!==t?e.parentUuid===t&&s.push(e):n=e;if(!n)return;n.expanded=!n.expanded,s.forEach(t=>t.shown=!t.shown);const a=[n,...s],i=this._selectedTask;i&&i!==n&&e.checkPaternity(this._tasks,n,i)&&(i.selected=!1,this._selectedTask=null,i.parentUuid!==n.uuid&&a.push(i)),this.updateRows({added:[],deleted:[],changed:a})}selectTask(t){const e=this._selectedTask;if(!e&&!t||e===t)return;this._selectedTask=null;const n=[];e&&(e.selected=!1,n.push(e)),t&&(t.selected=!0,n.push(t),this._selectedTask=t),this.updateRows({added:[],deleted:[],changed:n})}updateRows(t){this._table.updateRows(t),this._chart.updateRows(t)}updateLocale(){}setTableWrapperWidth(t){this._htmlTableWrapper.style.width=Math.max(this._options.tableMinWidth,t)+"px"}}u.WRAPPER_CLASS="tsg-wrapper",u.FOOTER_CLASS="tsg-footer",u.TABLE_WRAPPER_CLASS="tsg-table-wrapper",u.CHART_WRAPPER_CLASS="tsg-chart-wrapper",u.TABLE_CLASS="tsg-table",u.CHART_CLASS="tsg-chart",u.SEPARATOR_CLASS="tsg-separator";export{u as TsGantt,r as TsGanttChart,i as TsGanttOptions,l as TsGanttTable,e as TsGanttTask,s as TsGanttTaskChangesDetectionResult,t as TsGanttTaskModel,n as TsGanttTaskUpdateResult};
