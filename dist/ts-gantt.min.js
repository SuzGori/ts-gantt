class t{constructor(t,e,s,a,n=null,i=null,o=[]){this.durationPlanned=0,this.durationActual=0,this._progress=0,this.name=t,this.progress=e,this.datePlannedStart=s,this.datePlannedEnd=a,this.dateActualStart=n,this.dateActualEnd=i,this.children=o,this.refreshDuration(),this.uuid=crypto.getRandomValues(new Uint32Array(4)).join("-")}set progress(t){this._progress=t<0?0:t>100?100:t}get progress(){return this._progress}static flatten(e){const s=[];for(const a of e)s.push(a),0!==a.children.length&&s.push(...t.flatten(a.children));return s}refreshDuration(){this.durationPlanned=this.datePlannedEnd.getTime()-this.datePlannedStart.getTime(),this.dateActualStart&&this.dateActualEnd?this.durationActual=this.dateActualEnd.getTime()-this.dateActualStart.getTime():this.durationActual=0}}class e{constructor(t=null){this.headerHeight=60,this.rowHeight=0,this.columnWidth=0,this.scale="day",this.locale="en",this.customDateFormat="YYYY-MM-DD",this.allowMoveBars=!0,this.allowResizeBars=!0,this.allowMoveProgress=!0,this.barHeaderGetter=t=>t.name,this.tooltipHeaderGetter=t=>t.name,this.tooltipPlannedPeriodGetter=t=>`${t.datePlannedStart}-${t.datePlannedEnd}`,this.tooltipActualPeriodGetter=t=>`${t.dateActualStart}-${t.dateActualEnd}`,this.tooltipPlannedDurationGetter=t=>t.durationPlanned,this.tooltipActualDurationGetter=t=>t.durationActual,this.tooltipProgressGetter=t=>t.progress,null!=t&&Object.assign(this,t)}}class s{constructor(t,a){if(this._tasks=[],this._isSeparatorDragActive=!1,this.onMouseDownOnSep=t=>{t.target===this._separator&&(this._isSeparatorDragActive=!0)},this.onMouseMoveOnSep=t=>{if(!this._isSeparatorDragActive)return!1;const e=this._wrapper.offsetLeft,a=t.clientX-e;this._table.style.width=Math.max(s.GRID_MIN_WIDTH,a)+"px",this._table.style.flexGrow="0"},this.onMouseUpOnSep=t=>{this._isSeparatorDragActive=!1},this._container=document.querySelector(t),!this._container)throw new Error("Container is null");this.createLayout(),this._options=new e(a)}destroy(){document.removeEventListener("mousedown",this.onMouseDownOnSep),document.removeEventListener("mousemove",this.onMouseMoveOnSep),document.removeEventListener("mouseup",this.onMouseUpOnSep)}createLayout(){const t=document.createElement("div");t.classList.add(s.WRAPPER_CLASS);const e=document.createElement("table");e.classList.add(s.GRID_CLASS);const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.classList.add(s.SVG_CLASS);const n=document.createElement("div");n.classList.add(s.SEPARATOR_CLASS),t.appendChild(e),t.appendChild(n),t.appendChild(a),this._container.appendChild(t),this._wrapper=t,this._table=e,this._chartSvg=a,this._separator=n,document.addEventListener("mousedown",this.onMouseDownOnSep),document.addEventListener("mousemove",this.onMouseMoveOnSep),document.addEventListener("mouseup",this.onMouseUpOnSep)}clearTasks(){this._tasks.length=0}pushTasks(t){this._tasks.push(...t)}}s.WRAPPER_CLASS="ts-gantt-wrapper",s.GRID_CLASS="ts-gantt-grid",s.SVG_CLASS="ts-gantt-svg",s.SEPARATOR_CLASS="ts-gantt-separator",s.GRID_MIN_WIDTH=100;export{s as TsGantt,e as TsGanttOptions,t as TsGanttTask};
